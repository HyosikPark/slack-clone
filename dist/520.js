(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[520],{4520:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>c});var n=t(7294),s=t(3046),l=t(9669),i=t.n(l),r=t(3727),o=t(5977),u=t(917);function m(){const a=(0,o.k6)(),[e,t]=(0,n.useState)(""),[l,m]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[p,k]=(0,n.useState)(""),[Z,w]=(0,n.useState)(!1),[b,h]=(0,n.useState)({email:"",nickname:"",password:""}),[v,g]=(0,n.useState)(!1),I=(0,n.useCallback)((a=>{b.email&&h({...b,email:""}),t(a.target.value)}),[b]),f=(0,n.useCallback)((a=>{b.nickname&&h({...b,nickname:""}),m(a.target.value)}),[b]),C=(0,n.useCallback)((a=>{b.password&&h({...b,password:""}),d(a.target.value),w(a.target.value!==p)}),[b,p]),_=(0,n.useCallback)((a=>{b.password&&h({...b,password:""}),k(a.target.value),w(a.target.value!==c)}),[c,b]),S=(0,n.useCallback)((async t=>{if(t.preventDefault(),g(!1),Z)return;const n={email:e,nickname:l,password:c},{errors:s,valid:r}=function({email:a,nickname:e,password:t}){const n={email:"",nickname:"",password:""},s=/\s/g;let l=!0;return a.match(/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i)||(n.email="이메일 형식이 올바르지 않습니다.",l=!1),(""===a.trim()||a.match(s))&&(n.email="이메일을 입력해주세요.",l=!1),(""===e.trim()||e.match(s))&&(n.nickname="닉네임을 입력해주세요.",l=!1),(""===t.trim()||t.match(s))&&(n.password="비밀번호를 입력해주세요.",l=!1),{errors:n,valid:l}}(n);if(!r)return h(s);i().post("/api/users",{email:e,nickname:l,password:c}).then((()=>a.push("/login"))).catch((()=>g(!0)))}),[Z,e,l,c,a]);return(0,u.tZ)("div",{id:"container"},(0,u.tZ)(s.h4,null,"Slack-clone"),(0,u.tZ)(s.l0,{"data-testid":"form",onSubmit:S},(0,u.tZ)(s.__,{id:"email-label"},(0,u.tZ)("span",null,"이메일 주소"),(0,u.tZ)(s.II,{blankInput:Boolean(b.email),type:"email",id:"email",name:"email",value:e,onChange:I})),(0,u.tZ)(s.__,{id:"nickname-label"},(0,u.tZ)("span",null,"닉네임"),(0,u.tZ)(s.II,{blankInput:Boolean(b.nickname),type:"text",id:"nickname",name:"nickname",value:l,onChange:f})),(0,u.tZ)(s.__,{id:"password-label"},(0,u.tZ)("span",null,"비밀번호"),(0,u.tZ)(s.II,{blankInput:Boolean(b.password),type:"password",id:"password",name:"password",value:c,onChange:C})),(0,u.tZ)(s.__,{id:"password-check-label"},(0,u.tZ)("span",null,"비밀번호 확인"),(0,u.tZ)(s.II,{blankInput:Boolean(b.password),type:"password",id:"password-check",name:"password-check",value:p,onChange:_})),Object.entries(b).map((([a,e])=>e&&(0,u.tZ)(s.jj,{key:a,"data-testid":`blank-${a}`},e))),Z&&(0,u.tZ)(s.jj,{"data-testid":"mismatch-password"},"비밀번호가 일치하지 않습니다."),v&&(0,u.tZ)(s.jj,null,"이미 사용 중인 이메일입니다."),(0,u.tZ)(s.zx,{type:"submit"},"회원가입")),(0,u.tZ)(s.Ji,null,"이미 회원이신가요? ",(0,u.tZ)(r.rU,{to:"/login"},"로그인 하러가기")))}const c=n.memo(m)}}]);